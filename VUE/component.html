<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>组件</title>
</head>
<body>

<div class="tem">
  {{msg}}
</div>

<div id="app">
  <!-- 渲染组件   -->
  <cxp-p v-for='(y,i) in list' :canshu="y.age" v-bind:key="i"></cxp-p>
  <my-components></my-components>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>
  //注册组件(必须要在创建Vue实例之前)
  // 全局组件(只要在vue实例元素里就能使用)1.组件名称 , 2.组件配置
  Vue.component('cxp-p', {
    props: ['canshu'],//canshu 字母不要用大写
    //模板 最外层不能存在两个元素 必须有个根节点
    template: `<div>
                <p @click="a">这是组件上的内容{{count}}{{cxp_p_msg}}</p>
                <p>这是组件上的内容{{canshu}}:{{canshu}}</p>
              </div>`,
    //data使用函数返回值 运用闭包原理防止组件被多次调用时 该一发而动全身
    data:function () {
      return {
        cxp_p_msg: "这是模板里的数据",
        count: 0,
      }
    },
    methods:{
      a(){
        console.log(this.count++)
      }
    }
  });

  //创建一个组件需要的对象 组件第二个参数是个对象，可以用这个对象替代它
  let com = {
    props: ['canShu'],
      //模板 最外层不能存在两个元素 必须有个根节点
      template: `<div>
                <p @click="a">这是组件上的内容{{count}}{{cxp_p_msg}}</p>
                <p>这是组件上的内容{{canShu}}:{{canShu}}</p>
              </div>`,
    //data使用函数返回值 运用闭包原理防止组件被多次调用时 该一发而动全身
    data:function () {
    return {
      cxp_p_msg: "这是模板里的数据",
      count: 0,
    }
  },
    methods:{
      a(){
        console.log(this.count++)
      }
    }
  }

  new Vue({
    el: '#app',
    data:{
      list: [
        {name: "chen", age: 21},
        {name: "chen", age: 22},
        {name: "chen", age: 23},
      ],
    },
    //局部组件 只有在当前vue实例(#app)里才能使用
    components:{
      'my-components' : com
    }
  });

  //template模板(不推荐在vue实例中使用) 会把挂载的元素(#app)关掉显示模板里的东西
  //el就是告诉template模板覆盖到哪个元素上去，没有el他就不会覆盖(模板内代码不生效)
  let vTem = new Vue({
    el: '.tem',
    data:{
      msg: 'dd'
    },
    template:'<div>模板{{msg}}</div>',
  })
</script>
</body>
</html>